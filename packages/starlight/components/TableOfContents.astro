---
import { useTranslations } from '../utils/translations';
import TableOfContentsList from './TableOfContents/TableOfContentsList.astro';
import type { TocItem } from './TableOfContents/generateToC';

interface Props {
	toc: TocItem[];
	locale: string | undefined;
	maxHeadingLevel: number;
	minHeadingLevel: number;
}

const { locale, toc, maxHeadingLevel, minHeadingLevel } = Astro.props;
const t = useTranslations(locale);
---

<starstruck-toc
	class="w-60 sticky top-14 h-fit py-4 text-sm border-b border-zinc-200 dark:border-zinc-800 pl-4"
	data-min-h={minHeadingLevel}
	data-max-h={maxHeadingLevel}
>
	<nav aria-labelledby="starstruck__on-this-page">
		<h2 class="text-black dark:text-white font-semibold mb-4" id="starstruck__on-this-page">
			{t('tableOfContents.onThisPage')}
		</h2>
		<TableOfContentsList {toc} />
	</nav>
</starstruck-toc>

<script src="./TableOfContents/starstruck-toc"></script>
